var Admin=Admin||{};Admin.Search=function(){var n=function(n){var i=function(){return n.grandParent?$("<p/>").text([n.grandParent,n.parent].join(" > ")).html():n.parent},t='<div id="user-selection"><h5>'+n.title+"<\/h5>";return n.source?t=t+n.source:i()&&(t=t+i()),t+"<\/div>"},t=function(n){var t=function(n,t){return n.rate<t.rate?1:n.rate>t.rate?-1:n.title<t.title?-1:n.title>t.title?1:0};return function(i){var r=[],u=new RegExp(i,"i");return n(function(n){var t=n.rate||0,i=!1;u.test(n.title)?t+=10:n.node&&u.test(n.node)?t+=5:u.test(n.root)?t+=1:i=!0;n.rate=t;i||r.push(n)}),r.sort(t),r}};return{init:function(i){var r,u;Admin.Navigation.initOnce();r=$("#searchInput");r.blur(function(n){n.preventDefault();n.stopPropagation()});r.typeahead({minLength:1,highlight:!0,hint:!1},{name:"pages",displayKey:"name",templates:{suggestion:n},source:function(n,r,u){var f={searchTerm:$("#searchInput").val(),foundMenuItems:t(Admin.Navigation.enumerate)($("#searchInput").val())};addAntiForgeryToken(f);$.ajax({cache:!1,type:"POST",url:i,dataType:"json",data:f,success:function(n){u(n)},error:function(){alert("Error")}})},limit:100});u=function(n){r.typeahead("val","");Admin.Navigation.open(n.link)};r.on("typeahead:selected",function(n,t){u(t)})}}}();Admin=Admin||{};Admin.Navigation=function(){var r=function(){var n={},t=$("a.nav-link");return t.each(function(){var t=$(this).parentsUntil(".page-sidebar-menu"),i,r,u,f;switch(t.length){case 1:i=$(t).find("a").attr("href");r=$(t).find("a").find("span").html();n[i]={title:r,link:i,parent:null,grandParent:null};break;case 3:i=$(t).eq(0).find("a").attr("href");r=$(t).eq(0).find("a").find("span").html();u=$(t).eq(2).find("a").find("span").html();n[i]={title:r,link:i,parent:u,grandParent:null};break;case 5:i=$(t).eq(0).find("a").attr("href");r=$(t).eq(0).find("a").find("span").html();u=$(t).eq(2).find("a").find("span").html();f=$(t).eq(4).find("a").find("span").html();n[i]={title:r,link:i,parent:u,grandParent:f}}}),n},n,t=function(){n=r()},i={};return{enumerate:function(t){var r,i;for(r in n)i=n[r],t.call(i,i)},open:function(n){if(i.open){var t=$.Event("open",{url:n});if(i.open.fire(t),t.isDefaultPrevented())return}window.location.href=n},initOnce:function(){n||t()},init:t}}();